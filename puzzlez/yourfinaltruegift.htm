<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Gift from the Universe | For Kimo</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Dancing+Script:wght@700&family=Montserrat:wght@300;400&family=Playfair+Display:ital@1&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #e2b07e;
            --rose: #ff9a9e;
            --bg-color: #050505;
            --text-color: #ffffff;
            --danger: #ff4d4d;
        }

        /* General Styling */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background-color: var(--bg-color); 
            color: var(--text-color); 
            font-family: 'Montserrat', sans-serif; 
            overflow: hidden; 
            height: 100vh;
            cursor: default; /* تم إرجاع الماوس للشكل العادي */
        }

        canvas { position: fixed; inset: 0; z-index: -3; }

        /* Story Container */
        .story-container {
            position: relative;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
            z-index: 10;
        }

        .whisper-text {
            position: absolute;
            font-family: 'Playfair Display', serif;
            font-size: 2.2rem;
            max-width: 850px;
            opacity: 0;
            display: none;
            line-height: 1.6;
            text-shadow: 0 0 20px rgba(255,255,255,0.3);
        }

        /* Floating Arrow */
        .next-btn {
            position: fixed;
            bottom: 8%;
            left: 50%;
            transform: translateX(-50%);
            background: none;
            border: none;
            color: var(--primary);
            font-size: 2.5rem;
            cursor: pointer;
            opacity: 0;
            display: none;
            animation: bounce 2s infinite;
            z-index: 100;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateX(-50%) translateY(0);}
            40% {transform: translateX(-50%) translateY(-15px);}
        }

        /* Screenshots & Certificates */
        #overlay-img {
            position: fixed;
            max-width: 70%;
            max-height: 50%;
            border-radius: 5px;
            box-shadow: 0 0 40px rgba(226, 176, 126, 0.1);
            opacity: 0;
            display: none;
            z-index: 5;
            border: 1px solid rgba(226, 176, 126, 0.3);
        }

        /* Final UI Dashboard */
        .final-ui {
            display: none;
            opacity: 0;
            background: rgba(5, 5, 5, 0.9);
            backdrop-filter: blur(15px);
            border: 1px solid var(--primary);
            padding: 40px;
            width: 90%;
            max-width: 1000px;
            max-height: 85vh;
            overflow-y: auto;
            border-radius: 2px;
            z-index: 200;
            scrollbar-width: thin;
            scrollbar-color: var(--primary) transparent;
        }

        .cert-container {
            position: relative;
            cursor: zoom-in;
            margin-bottom: 30px;
            transition: transform 0.3s ease;
        }
        
        .cert-container:hover { transform: scale(1.02); }

        #reward-img {
            width: 100%;
            max-width: 600px;
            border: 1px solid var(--primary);
            padding: 5px;
        }

        /* Zoom Modal */
        #zoom-modal {
            position: fixed; inset: 0; background: rgba(0,0,0,0.95);
            display: none; justify-content: center; align-items: center;
            z-index: 9999; cursor: zoom-out;
        }
        #zoom-modal img { max-width: 95%; max-height: 95%; border: 1px solid var(--primary); }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 30px 0;
            text-align: left;
            border-top: 1px solid rgba(226, 176, 126, 0.2);
            padding-top: 20px;
        }

        .info-item h4 { color: var(--primary); font-family: 'Cinzel'; font-size: 0.75rem; letter-spacing: 2px; }
        .info-item p { font-size: 1rem; color: #ccc; }

        .birthday-footer {
            margin-top: 50px;
            font-family: 'Dancing Script', cursive;
            font-size: 2.5rem;
            color: var(--primary);
            border-top: 1px solid rgba(226, 176, 126, 0.2);
            padding-top: 20px;
        }

        #start-screen {
            position: fixed; inset: 0; background: #000;
            display: flex; justify-content: center; align-items: center; z-index: 1000;
        }
        
        #start-btn {
            background: none; border: 1px solid var(--primary); color: var(--primary);
            padding: 20px 40px; font-family: 'Cinzel'; letter-spacing: 4px;
            cursor: pointer; transition: 0.5s;
        }
        #start-btn:hover { background: var(--primary); color: #000; box-shadow: 0 0 30px var(--primary); }

        .visit-btn {
            display: inline-block; padding: 10px 20px; margin-top: 20px;
            border: 1px solid var(--rose); color: var(--rose); text-decoration: none;
            font-family: 'Cinzel'; transition: 0.3s;
        }
        .visit-btn:hover { background: var(--rose); color: #000; }
    </style>
</head>
<body>

    <audio id="bg-music" loop>
        <source src="final.mp3" type="audio/mpeg">
    </audio>

    <div id="start-screen">
        <button id="start-btn">END THE GAME</button>
    </div>

    <canvas id="star-canvas"></canvas>

    <div class="story-container">
        <p class="whisper-text" id="t1">"Didn’t you ask yourself why this site always has stars in it?"</p>
        <p class="whisper-text" id="t2">"Why the style and every puzzle talking about stars, Kimo?"</p>
        <p class="whisper-text" id="t3">"Is it because they’re beautiful? <br> Or because they’re the only thing that stays bright when everything else goes dark?"</p>
        <p class="whisper-text" id="t4">"Well, let’s throw this question for now..."</p>
        <p class="whisper-text" id="t5">"You said yourself they were peaceful land and silent, yet comforting."</p>
        
        <img src="urword.png" id="overlay-img" alt="Memory">

        <p class="whisper-text" id="t6">"Is there a sky without stars?"</p>
        <p class="whisper-text" id="t7" style="font-size: 4.5rem; font-family: 'Cinzel';">Now...</p>
        <p class="whisper-text" id="t8">"Actually, I have something I want to show you. <br> Something that belongs to you now."</p>

        <div class="final-ui" id="final-ui">
            <div class="cert-container" onclick="openZoom()">
                <img src="reward4.png" id="reward-img" alt="Star Certificate">
                <p style="font-size: 0.8rem; margin-top: 10px; opacity: 0.6;">(Click to enlarge certificate)</p>
            </div>

            <div style="font-family: 'Playfair Display'; font-style: italic; font-size: 1.3rem; margin-bottom: 30px;">
                <p>"People come and go, and memories eventually fade."</p>
                <p>"But some things are meant to stay forever. Unchanged by time, untouched by the world."</p>
                <p>"No matter where you are or how much things change, <br> you have a place in the universe that is <strong>Forever</strong>."</p>
            </div>

            <h2 style="font-family: 'Cinzel'; color: var(--primary); letter-spacing: 5px;">I NAMED THIS STAR KIMO</h2>
            <p style="margin-top: 10px; opacity: 0.8;">"A small reward since you don't like gifts xd"</p>

            <div class="info-grid">
                <div class="info-item"><h4>DEDICATION</h4><p>Amigos Star</p></div>
                <div class="info-item"><h4>NAMED ON</h4><p>February 17, 2026</p></div>
                <div class="info-item"><h4>NAMED BY</h4><p>Youssef MXM</p></div>
                <div class="info-item"><h4>CONSTELLATION</h4><p>Grus (Crane)</p></div>
                <div class="info-item"><h4>RIGHT ASCENSION</h4><p>22h 59m 32.92s</p></div>
                <div class="info-item"><h4>DECLINATION</h4><p>-41.7694°</p></div>
                <div class="info-item"><h4>MAGNITUDE</h4><p>11.17 mag</p></div>
                <div class="info-item"><h4>IDENTIFIER</h4><p>8008:457:1</p></div>
            </div>

            <a href="https://www.staracle.com/staracle/staracle.php?Tycho=8008004571" target="_blank" class="visit-btn">LOCATE STAR IN UNIVERSE →</a>

            <div class="birthday-footer">
                Happy Birthday Kimo.<br>
                And make your dreams come true.<br>
                <span style="font-size: 1.2rem; opacity: 0.5; font-family: 'Cinzel'; letter-spacing: 3px;">- MXM -</span>
            </div>
        </div>

        <button class="next-btn" id="next-trigger">▼</button>
    </div>

    <div id="zoom-modal" onclick="closeZoom()">
        <img src="reward4.png">
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script>
        // 1. Background Engine (Stars & Planets)
        const canvas = document.getElementById('star-canvas');
        const ctx = canvas.getContext('2d');
        let elements = [];

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        class SpaceObject {
            constructor(type) {
                this.type = type; // 'star' or 'planet'
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = type === 'star' ? Math.random() * 2 : Math.random() * 15 + 5;
                this.speed = Math.random() * 0.4 + 0.1;
                this.opacity = Math.random();
            }
            draw() {
                ctx.beginPath();
                if(this.type === 'star') {
                    ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity})`;
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                } else {
                    ctx.fillStyle = `rgba(226, 176, 126, 0.1)`;
                    ctx.strokeStyle = `rgba(226, 176, 126, 0.2)`;
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.stroke();
                }
                ctx.fill();
            }
            update() {
                this.y -= this.speed;
                if (this.y < -20) this.y = canvas.height + 20;
            }
        }

        function initSpace() {
            for (let i = 0; i < 200; i++) elements.push(new SpaceObject('star'));
            for (let i = 0; i < 8; i++) elements.push(new SpaceObject('planet'));
        }
        initSpace();

        function animateSpace() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            elements.forEach(el => { el.draw(); el.update(); });
            requestAnimationFrame(animateSpace);
        }
        animateSpace();

        // 2. Story Flow Logic
        let currentStep = 0;
        const startBtn = document.getElementById('start-btn');
        const nextBtn = document.getElementById('next-trigger');
        const audio = document.getElementById('bg-music');

        startBtn.addEventListener('click', () => {
            audio.play();
            gsap.to("#start-screen", { opacity: 0, duration: 2, onComplete: () => {
                document.getElementById('start-screen').style.display = 'none';
                // الانتظار 8 ثواني قبل بدء أول رسالة
                setTimeout(() => startStory(), 8000); 
            }});
        });

        const timeline = {
            1: { text: "#t1" },
            2: { text: "#t2" },
            3: { text: "#t3" },
            4: { text: "#t4" },
            5: { text: "#t5", img: "#overlay-img" },
            6: { text: "#t6" },
            7: { text: "#t7" },
            8: { text: "#t8" },
            9: { ui: "#final-ui" }
        };

        function startStory() {
            showStep(1);
        }

        function showStep(s) {
            currentStep = s;
            const stepData = timeline[s];
            
            if (stepData.text) {
                const el = document.querySelector(stepData.text);
                el.style.display = 'block';
                gsap.fromTo(el, { opacity: 0, y: 30, filter: "blur(10px)" }, { opacity: 1, y: 0, filter: "blur(0px)", duration: 2.5 });
            }

            if (stepData.img) {
                const img = document.querySelector(stepData.img);
                img.style.display = 'block';
                gsap.to(img, { opacity: 1, duration: 3, delay: 1 });
            }

            if (stepData.ui) {
                const ui = document.querySelector(stepData.ui);
                ui.style.display = 'block';
                // أنيميشن خاص لدخول الـ UI النهائي
                gsap.fromTo(ui, { opacity: 0, scale: 0.8, y: 100 }, { opacity: 1, scale: 1, y: 0, duration: 3, ease: "power4.out" });
                nextBtn.style.display = 'none';
                return;
            }

            // إظهار السهم بعد وقت قصير
            setTimeout(() => {
                nextBtn.style.display = 'block';
                gsap.to(nextBtn, { opacity: 1, duration: 1 });
            }, 3000);
        }

        nextBtn.addEventListener('click', () => {
            const stepData = timeline[currentStep];
            
            // Fade out current elements
            if (stepData.text) {
                gsap.to(stepData.text, { opacity: 0, y: -30, filter: "blur(10px)", duration: 1.5, onComplete: () => {
                    document.querySelector(stepData.text).style.display = 'none';
                }});
            }
            if (stepData.img) {
                gsap.to(stepData.img, { opacity: 0, duration: 1.5, onComplete: () => {
                    document.querySelector(stepData.img).style.display = 'none';
                }});
            }
            
            gsap.to(nextBtn, { opacity: 0, duration: 0.5, onComplete: () => {
                nextBtn.style.display = 'none';
                showStep(currentStep + 1);
            }});
        });

        // 3. Zoom Functions
        function openZoom() {
            document.getElementById('zoom-modal').style.display = 'flex';
        }
        function closeZoom() {
            document.getElementById('zoom-modal').style.display = 'none';
        }
    </script>
</body>
</html>